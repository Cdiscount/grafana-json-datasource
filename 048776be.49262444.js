(window.webpackJsonp=window.webpackJsonp||[]).push([[3],{120:function(e,t,a){"use strict";a.r(t),t.default=a.p+"assets/images/editor-fields-f58f4f8061d96ebfbe5ec1d4d038382c.png"},121:function(e,t,a){"use strict";a.r(t),t.default=a.p+"assets/images/editor-path-e0ae42b2a224e021260032b6ef7decab.png"},122:function(e,t,a){"use strict";a.r(t),t.default=a.p+"assets/images/editor-params-38ee277b9e4933d64b5bef7a544d626b.png"},123:function(e,t,a){"use strict";a.r(t),t.default=a.p+"assets/images/editor-headers-ec374ed9d6de475ce39800bb051c473a.png"},124:function(e,t,a){"use strict";a.r(t),t.default=a.p+"assets/images/editor-body-ad8dc6437ce714c17f96967631c4419d.png"},63:function(e,t,a){"use strict";a.r(t),a.d(t,"frontMatter",(function(){return s})),a.d(t,"metadata",(function(){return i})),a.d(t,"toc",(function(){return b})),a.d(t,"default",(function(){return d}));var r=a(3),n=a(7),o=(a(0),a(87)),s={id:"query-editor",title:"Query editor"},i={unversionedId:"query-editor",id:"query-editor",isDocsHomePage:!1,title:"Query editor",description:"This page explains the what each part of the query editor does, and how you can configure it.",source:"@site/docs/query-editor.md",slug:"/query-editor",permalink:"/grafana-json-datasource/query-editor",editUrl:"https://github.com/marcusolsson/grafana-json-datasource/edit/main/docs/docs/query-editor.md",version:"current",sidebar:"someSidebar",previous:{title:"Configuration",permalink:"/grafana-json-datasource/configuration"}},b=[{value:"Fields",id:"fields",children:[]},{value:"Path",id:"path",children:[]},{value:"Params",id:"params",children:[]},{value:"Headers",id:"headers",children:[]},{value:"Body",id:"body",children:[]},{value:"Macros",id:"macros",children:[]}],c={toc:b};function d(e){var t=e.components,s=Object(n.a)(e,["components"]);return Object(o.b)("wrapper",Object(r.a)({},c,s,{components:t,mdxType:"MDXLayout"}),Object(o.b)("p",null,"This page explains the what each part of the query editor does, and how you can configure it."),Object(o.b)("p",null,"The query editor for the JSON API data source consists of a number of tabs. Each tab configures a part of the query."),Object(o.b)("h3",{id:"fields"},"Fields"),Object(o.b)("p",null,Object(o.b)("img",{alt:"Fields",src:a(120).default})),Object(o.b)("p",null,"The ",Object(o.b)("strong",{parentName:"p"},"Fields")," tab is where you select the data to extract from the JSON document returned by the URL configured in the data source configuration."),Object(o.b)("ul",null,Object(o.b)("li",{parentName:"ul"},Object(o.b)("p",{parentName:"li"},Object(o.b)("strong",{parentName:"p"},"Field")," must contain a valid JSONPath expression and can return one or more elements.")),Object(o.b)("li",{parentName:"ul"},Object(o.b)("p",{parentName:"li"},Object(o.b)("strong",{parentName:"p"},"Type")," defines the JSON type of the elements returned by the ",Object(o.b)("strong",{parentName:"p"},"Field")," expression. By default, Grafana uses the types in the JSON document. If ",Object(o.b)("strong",{parentName:"p"},"Type")," is set to a different type than the original property type, Grafana tries to parse the value."),Object(o.b)("p",{parentName:"li"},"This can be useful in cases where the API returns quoted numbers, e.g. ",Object(o.b)("inlineCode",{parentName:"p"},'"price": "3.49"'),"."))),Object(o.b)("h3",{id:"path"},"Path"),Object(o.b)("p",null,Object(o.b)("img",{alt:"Path",src:a(121).default})),Object(o.b)("p",null,"The drop-down box to the left lets you configure the ",Object(o.b)("strong",{parentName:"p"},"HTTP method")," of the request sent to the URL and can be set to ",Object(o.b)("strong",{parentName:"p"},"GET")," and ",Object(o.b)("strong",{parentName:"p"},"POST"),"."),Object(o.b)("p",null,"The text box lets you append a path to the URL in the data source configuration. This can be used to dynamically change the request URL using ",Object(o.b)("a",{parentName:"p",href:"https://grafana.com/docs/grafana/latest/variables/"},"variables"),"."),Object(o.b)("p",null,"For example, by setting the path to ",Object(o.b)("inlineCode",{parentName:"p"},"/movies/${movie}/summary")," you can query the summary for any movie without having to change the query itself."),Object(o.b)("h3",{id:"params"},"Params"),Object(o.b)("p",null,Object(o.b)("img",{alt:"Params",src:a(122).default})),Object(o.b)("p",null,"Add any parameters you'd like to send as part of the query string. For example, the parameters in the screenshot gets encoded as ",Object(o.b)("inlineCode",{parentName:"p"},"?category=movies"),"."),Object(o.b)("p",null,"Both the ",Object(o.b)("strong",{parentName:"p"},"Key")," and ",Object(o.b)("strong",{parentName:"p"},"Value")," fields support ",Object(o.b)("a",{parentName:"p",href:"https://grafana.com/docs/grafana/latest/variables/"},"variables"),"."),Object(o.b)("blockquote",null,Object(o.b)("p",{parentName:"blockquote"},Object(o.b)("strong",{parentName:"p"},"Note:")," Any query parameters that have been set by the administrator in the data source configuration has higher priority and overrides the parameters set by the query.")),Object(o.b)("h3",{id:"headers"},"Headers"),Object(o.b)("p",null,Object(o.b)("img",{alt:"Headers",src:a(123).default})),Object(o.b)("p",null,"Add any parameters you'd like to send as HTTP headers."),Object(o.b)("p",null,"Both the ",Object(o.b)("strong",{parentName:"p"},"Key")," and ",Object(o.b)("strong",{parentName:"p"},"Value")," fields support ",Object(o.b)("a",{parentName:"p",href:"https://grafana.com/docs/grafana/latest/variables/"},"variables"),"."),Object(o.b)("h3",{id:"body"},"Body"),Object(o.b)("p",null,Object(o.b)("img",{alt:"Body",src:a(124).default})),Object(o.b)("p",null,"Sets the text to send as a request body."),Object(o.b)("ul",null,Object(o.b)("li",{parentName:"ul"},Object(o.b)("strong",{parentName:"li"},"Syntax highlighting")," sets the active syntax for the editor. This is only for visual purposes and doesn't change the actual request.")),Object(o.b)("blockquote",null,Object(o.b)("p",{parentName:"blockquote"},Object(o.b)("strong",{parentName:"p"},"Note:")," Due to limitations in modern browsers, Grafana ignores the request body if the HTTP method is set to GET.")),Object(o.b)("h2",{id:"macros"},"Macros"),Object(o.b)("p",null,"Use macros in your query string and JSON Path queries to add dashboard context to your queries."),Object(o.b)("table",null,Object(o.b)("thead",{parentName:"table"},Object(o.b)("tr",{parentName:"thead"},Object(o.b)("th",{parentName:"tr",align:null},"Macro"),Object(o.b)("th",{parentName:"tr",align:null},"Description"))),Object(o.b)("tbody",{parentName:"table"},Object(o.b)("tr",{parentName:"tbody"},Object(o.b)("td",{parentName:"tr",align:null},Object(o.b)("inlineCode",{parentName:"td"},"$__unixEpochFrom()")),Object(o.b)("td",{parentName:"tr",align:null},"Start of the dashboard time interval as a Unix timestamp, i.e. 1494410783")),Object(o.b)("tr",{parentName:"tbody"},Object(o.b)("td",{parentName:"tr",align:null},Object(o.b)("inlineCode",{parentName:"td"},"$__unixEpochTo()")),Object(o.b)("td",{parentName:"tr",align:null},"End of the dashboard time interval as a Unix timestamp, i.e. 1494410783")))))}d.isMDXComponent=!0}}]);